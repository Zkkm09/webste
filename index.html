<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ÙˆØ§Ø¬Ù‡Ø© Ø¹Ø±Ø¨ÙŠØ©</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
@import url('https://fonts.googleapis.com/css2?family=Lemonada:wght@300..700&display=swap');
:root {
  --color-primary: #2563EB;
  --color-secondary: #1E40AF;
  --color-accent: #3B82F6;
  --color-accent-2: #9333EA;
  --color-dark: #111827;
  --color-light: #F9FAFB;
  --color-white: #FFFFFF;
  --color-gray: #6B7280;
  --color-primary-transparent: rgba(37, 99, 235, 0.85);
  --color-border: #E5E7EB;
  --color-shadow: rgba(0, 0, 0, 0.12);
  --gradient-accent: linear-gradient(90deg, var(--color-accent), #0099FF, var(--color-accent-2));
}
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family: "Lemonada", cursive; min-height: 100vh; background: var(--color-white); color: var(--color-dark); padding-top: 60px; padding-bottom: 70px; }
header { position: fixed; top:0; right:0; width:100%; display:flex; justify-content:space-between; align-items:center; padding:8px 16px; background: var(--color-primary-transparent); backdrop-filter: blur(10px); z-index:1000; }
header .logo img { height:40px; }
header .search { font-size:20px; color:var(--color-white); cursor:pointer; }
.page { display:none; padding:5px 0; min-height:100vh; }
.page.active { display:block; }
nav { position: fixed; bottom:0; right:0; width:100%; display:flex; justify-content: space-around; align-items:center; padding:8px 0; background: var(--color-primary-transparent); backdrop-filter: blur(10px); }
nav .nav-item { display:flex; flex-direction:column; align-items:center; cursor:pointer; }
nav .icon { width:40px; height:40px; border-radius:50%; background:var(--color-white); display:flex; justify-content:center; align-items:center; font-size:16px; color:var(--color-primary); box-shadow:0 2px 6px var(--color-shadow); transition:0.3s; }
nav .active .icon { transform:scale(1.2); background:var(--gradient-accent); color:var(--color-white); border:2px solid var(--color-white); }
nav span { font-size:12px; margin-top:4px; color:var(--color-light); }
.categories { display:flex; flex-direction:row; gap:20px; padding:10px 16px; overflow-x:auto; scrollbar-width:none; }
.categories::-webkit-scrollbar { display:none; }
.category { flex:0 0 auto; text-align:center; cursor:pointer; }
.category img { width:90px; height:90px; border-radius:50%; border:2px solid var(--color-primary); object-fit:cover; }
.category span { display:block; margin-top:6px; font-size:14px; }
.category.active img { border:3px dashed var(--color-primary); }
.category.active span { color:var(--color-primary); }
.divider { border:none; border-top:1px solid var(--color-border); margin:10px 0; }
.products { display:grid; grid-template-columns:repeat(auto-fill, minmax(140px,1fr)); gap:16px; padding:10px 16px 80px; }
.product { background: var(--color-light); border-radius: 10px; box-shadow: 0 2px 6px var(--color-shadow); text-align:center; padding:8px; transition: transform 0.3s; cursor:pointer; display:flex; flex-direction:column; align-items:center; }
.product:hover { transform: translateY(-4px); }
.product img { width:140px; height:140px; border-radius:8px; object-fit:contain; background:var(--color-white); flex-shrink:0; }
.product .title-wrapper { display:flex; flex-direction:column; align-items:flex-start; width:100%; margin-top:6px; }
.product .title { font-size:14px; }
.product .price-cart { display:flex; justify-content: space-between; align-items: center; width: 100%; margin-top: 4px; }
.product .price-cart .price { font-weight:bold; color: var(--color-primary); }
.product .price-cart .cart-btn { margin-top:0; }
.product .cart-btn { display:flex; justify-content:center; align-items:center; width:28px; height:28px; border-radius:50%; background:var(--color-primary); color:white; font-size:14px; cursor:pointer; transition:0.3s; }
.cart-container { padding: 24px; }
.cart-item { display: flex; gap: 12px; align-items: center; background: var(--color-light); padding: 12px; border-radius: 10px; margin-bottom: 12px; box-shadow: 0 2px 6px var(--color-shadow); position: relative; }
.cart-item img { width: 80px; height: 80px; border-radius: 8px; object-fit: contain; background: var(--color-white); }
.cart-details { flex: 1; display: flex; flex-direction: column; justify-content: space-between; }
.cart-title { font-weight: bold; font-size: 16px; margin-bottom: 6px; }
.cart-qty-price { display: flex; justify-content: space-between; align-items: center; }
.quantity { display: flex; align-items: center; gap: 4px; }
.quantity input { width: 40px; text-align: center; border: 1px solid var(--color-border); border-radius: 6px; padding: 2px 0; }
.qty-btn { width: 24px; height: 24px; background: var(--color-primary); color: var(--color-white); border: none; border-radius: 6px; cursor: pointer; font-weight: bold; }
.cart-price { font-weight: bold; color: var(--color-primary); }
.cart-summary { margin:16px; padding:14px 16px; background:var(--color-light); border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,0.15); }
.cart-summary div { display:flex; justify-content:space-between; margin-bottom:8px; }
.cart-summary div.total { font-weight:bold; font-size:18px; margin-bottom:0; }
.checkout-btn { width: 100%; padding: 16px 20px; background: var(--color-primary); color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: bold; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.15); margin-bottom: 30px; }
.remove-btn { position: absolute; top: 8px; left: 8px; background: red; color: white; border: none; border-radius: 50%; width: 22px; height: 22px; font-weight: bold; cursor: pointer; display: flex; justify-content: center; align-items: center; }

.delivery-options { display:flex; gap:16px; margin-top:8px; }
.delivery-btn { flex:1; text-align:center; padding:10px 0; border-radius:8px; background:var(--color-light); color:var(--color-dark); cursor:pointer; font-weight:bold; box-shadow:0 2px 6px rgba(0,0,0,0.12); transition:0.3s; display:flex; flex-direction:column; align-items:center; }
.delivery-btn div { font-size:16px; margin-bottom:4px; }
.delivery-btn small { font-size:12px; color:var(--color-gray); }
.delivery-btn.active { background: var(--gradient-accent); color:white; }
.delivery-btn.active small { color: rgba(255,255,255,0.9); }

.product-popup-overlay { position: fixed; top:0; left:0; width:100%; height:100%; backdrop-filter: blur(6px); background: rgba(0,0,0,0.3); display: none; justify-content:center; align-items:center; z-index:2000; opacity:0; transition: opacity 0.3s ease; }
.product-popup-overlay.show { display:flex; opacity:1; }
.product-popup { background: var(--color-white); padding: 20px; border-radius:12px; max-width:300px; text-align:center; position:relative; box-shadow:0 4px 12px var(--color-shadow); transform: scale(0.8); transition: transform 0.3s ease; }
.product-popup-overlay.show .product-popup { transform: scale(1); }
.product-popup img { width:250px; height:250px; border-radius:8px; object-fit:contain; background:var(--color-white); }
.product-popup span { display:block; font-weight:bold; font-size:16px; margin-bottom:4px; }
.product-popup .description { display:block; font-size:14px; color:var(--color-gray); margin-bottom:8px; }
.product-popup .price { display:block; font-size:16px; color:var(--color-primary); font-weight:bold; margin-bottom:8px; }
.product-popup .close-btn { position:absolute; top:8px; right:10px; font-size:20px; cursor:pointer; color:var(--color-dark); }
.product-popup button { width:100%; padding:6px 12px; border:none; border-radius:8px; background: var(--color-primary); color:white; font-weight:bold; cursor:pointer; }

.search-overlay { position:fixed; top:0; left:0; width:100%; height:100%; backdrop-filter: blur(6px); background: rgba(0,0,0,0.5); display:none; justify-content:center; align-items:center; z-index:3000; }
.search-overlay.show { display:flex; }
.search-box { background: var(--color-white); padding:15px 20px; border-radius:12px; width:90%; max-width:400px; display:flex; align-items:center; position:relative; }
.search-box input { width:100%; padding:8px 12px; border:1px solid var(--color-border); border-radius:8px; font-size:16px; }
.search-box span { position:absolute; right:10px; font-size:24px; cursor:pointer; color:var(--color-dark); }
header .search {
  display: flex;
  align-items: center;
  gap: 8px;
  position: relative;
}

header .search input {
  display: none;
  padding: 6px 10px;
  border-radius: 6px;
  border: 1px solid var(--color-border);
  font-size: 14px;
}

header .search.active input {
  display: block;
}

header .search.active i {
  content: "\f00d"; /* font-awesome X icon */
  font-family: "Font Awesome 6 Free";
  font-weight: 900;
}
</style>
</head>
<body>

<header>
  <div class="logo"><img src="./images/logo.png" alt="Ø§Ù„Ø´Ø¹Ø§Ø±"></div>
  <div class="search">
  <i class="fas fa-search" id="searchToggle"></i>
  <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...">
</div>
</header>

<main>
<section id="home" class="page active">
  <div class="categories">
    <div class="category active" data-category="all">
      <img src="./images/Untitled design (16).png" alt="Ø§Ù„ÙƒÙ„"><span>Ø§Ù„ÙƒÙ„</span>
    </div>
    <div class="category" data-category="electronics">
      <img src="./images/Untitled design (17).png" alt="Ø§Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª"><span>Ø§Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª</span>
    </div>
    <div class="category" data-category="clothes">
      <img src="https://via.placeholder.com/80" alt="Ù…Ù„Ø§Ø¨Ø³"><span>Ù…Ù„Ø§Ø¨Ø³</span>
    </div>
    <div class="category" data-category="kitchen">
      <img src="https://via.placeholder.com/80" alt="Ù…Ø·Ø¨Ø®"><span>Ù…Ø·Ø¨Ø®</span>
    </div>
    <div class="category" data-category="kitchen">
      <img src="https://via.placeholder.com/80" alt="Ù…Ø·Ø¨Ø®"><span>Ù…Ø·Ø¨Ø®</span>
    </div>
    <div class="category" data-category="kitchen">
      <img src="https://via.placeholder.com/80" alt="Ù…Ø·Ø¨Ø®"><span>Ù…Ø·Ø¨Ø®</span>
    </div>
  </div>

  <hr class="divider">
<div style="padding:10px 16px;">
  <label>ÙÙ„ØªØ±Ø© Ø¨Ø§Ù„Ø³Ø¹Ø±:</label>
  <input type="number" id="minPrice" placeholder="Ù…Ù†" style="width:80px; padding:6px; margin:0 4px;">
  <input type="number" id="maxPrice" placeholder="Ø¥Ù„Ù‰" style="width:80px; padding:6px; margin:0 4px;">
  <button id="priceFilterBtn" style="padding:6px 12px; border:none; border-radius:6px; background:var(--color-primary); color:white;">ØªØµÙÙŠØ©</button>
</div>
  <div class="products">
    <div class="product" data-category="electronics">
      <img src="./images/logo.png" alt="Ù‡Ø§ØªÙ Ø°ÙƒÙŠ">
      <div class="title-wrapper">
        <span class="title">Ù‡Ø§ØªÙ Ø°ÙƒÙŠ</span>
        <div class="price-cart">
          <span class="price">250$</span>
          <div class="cart-btn"><i class="fas fa-cart-plus"></i></div>
        </div>
      </div>
      <span class="description" style="display:none;">Ù‡Ø§ØªÙ Ø°ÙƒÙŠ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø¬ÙˆØ¯Ø© Ù…Ø¹ Ø´Ø§Ø´Ø© 6.5 Ø¨ÙˆØµØ©.</span>
    </div>
    <div class="product" data-category="clothes">
      <img src="./images/Untitled design (16).png" alt="Ù‚Ù…ÙŠØµ">
      <div class="title-wrapper">
        <span class="title">Ù‚Ù…ÙŠØµ</span>
        <div class="price-cart">
          <span class="price">35$</span>
          <div class="cart-btn"><i class="fas fa-cart-plus"></i></div>
        </div>
      </div>
      <span class="description" style="display:none;">Ù‚Ù…ÙŠØµ Ù‚Ø·Ù†ÙŠ Ù…Ø±ÙŠØ­ Ù„Ù„Ø§Ø±ØªØ¯Ø§Ø¡ Ø§Ù„ÙŠÙˆÙ…ÙŠ.</span>
    </div>
    <div class="product" data-category="kitchen">
      <img src="./images/Untitled design (17).png" alt="Ø®Ù„Ø§Ø·">
      <div class="title-wrapper">
        <span class="title">Ø®Ù„Ø§Ø·</span>
        <div class="price-cart">
          <span class="price">60$</span>
          <div class="cart-btn"><i class="fas fa-cart-plus"></i></div>
        </div>
      </div>
      <span class="description" style="display:none;">Ø®Ù„Ø§Ø· ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ø³Ø±Ø¹Ø§Øª Ù…Ø¹ ÙƒÙˆØ¨ Ø²Ø¬Ø§Ø¬ÙŠ.</span>
    </div>
  </div>
</section>

<section id="cart" class="page">
  <h2>ğŸ›’ Ø§Ù„Ø³Ù„Ø©</h2>
  <div class="cart-container" id="cartContainer"></div>

<div style="margin:16px;">
  <label for="userLocation" style="font-weight:bold;">Ù…ÙˆÙ‚Ø¹Ùƒ:</label>
  <div style="display:flex; gap:6px;">
    <input type="text" id="userLocation" placeholder="Ø£Ø¯Ø®Ù„ Ù…ÙˆÙ‚Ø¹Ùƒ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ù…ÙˆÙ‚Ø¹ÙŠ"
           style="flex:1; padding:10px; border-radius:8px; border:1px solid #ccc;">
    <button id="getLocationBtn" style="padding:10px 12px; border:none; border-radius:8px; background:var(--color-primary); color:white; cursor:pointer;">
      ğŸ“ Ù…ÙˆÙ‚Ø¹ÙŠ
    </button>
  </div>
</div>

<div style="margin:16px;">
  <label for="couponCode" style="font-weight:bold;">ÙƒÙˆØ¯ Ø§Ù„Ø®ØµÙ…:</label>
  <input type="text" id="couponCode" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯"
         style="width:100%; padding:10px; margin-top:6px; border-radius:8px; border:1px solid #ccc;">
</div>

<div style="margin:16px;">
  <label for="userPhone" style="font-weight:bold;">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</label>
  <input type="tel" id="userPhone" placeholder="07XXXXXXXX"
         style="width:100%; padding:10px; margin-top:6px; border-radius:8px; border:1px solid #ccc;">
</div>

<div style="margin:16px;">
  <label for="orderNotes" style="font-weight:bold;">Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</label>
  <textarea id="orderNotes" placeholder="Ø£Ø¯Ø®Ù„ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ"
         style="width:100%; padding:10px; margin-top:6px; border-radius:8px; border:1px solid #ccc;"></textarea>
</div>

  <div style="margin:16px;">
    <label style="font-weight:bold; display:block; margin-bottom:6px;">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙˆØµÙŠÙ„:</label>
    <div class="delivery-options">
      <div class="delivery-btn active" data-fee="5"><div> ØªÙˆØµÙŠÙ„</div><small>5$</small></div>
      <div class="delivery-btn" data-fee="0"><div> Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„Ù…ØªØ¬Ø±</div><small></small></div>
    </div>
  </div>

  <div class="cart-summary">
    <div><span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ:</span><span id="subtotalPrice">0$</span></div>
    <div><span>Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„:</span><span id="deliveryFee">0$</span></div>
    <div class="total"><span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span><span id="totalPrice">0$</span></div>
  </div>

  <button class="checkout-btn" id="checkoutBtn">Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø¯ÙØ¹</button>
</section>

<section id="profile" class="page">
  <h2>ğŸ‘¤ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙŠ</h2>
  <p>Ù‡Ø°Ù‡ Ù‡ÙŠ ØµÙØ­ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©.</p>
</section>
</main>

<nav>
  <div class="nav-item active" data-target="home"><div class="icon"><i class="fas fa-home"></i></div><span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span></div>
<div class="nav-item" data-target="cart">
  <div class="icon" style="position:relative;">
    <i class="fas fa-shopping-cart"></i>
    <span id="cartBadge" style="position:absolute; top:-6px; right:-6px; background:red; color:white; border-radius:50%; padding:2px 6px; font-size:10px; display:none;">0</span>
  </div>
  <span>Ø§Ù„Ø³Ù„Ø©</span>
</div>
  <div class="nav-item" data-target="profile"><div class="icon"><i class="fas fa-user"></i></div><span>Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙŠ</span></div>
</nav>

<div class="product-popup-overlay" id="productPopupOverlay">
  <div class="product-popup">
    <span class="close-btn" id="popupClose">&times;</span>
    <img src="" alt="product" id="popupImg">
    <span id="popupTitle"></span>
    <span class="description" id="popupDesc"></span>
    <span class="price" id="popupPrice"></span>

<div style="margin:10px 0;">
  <label style="font-weight:bold;">Ø§Ù„ÙƒÙ…ÙŠØ©:</label>
  <input type="number" id="popupQty" value="1" min="1"
         style="width:80px; padding:6px; margin-top:4px; border-radius:6px; border:1px solid #ccc; text-align:center;">
</div>

<button id="popupAddCart">Ø§Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
  </div>
</div>

<script>
  const getLocationBtn = document.getElementById("getLocationBtn");
const userLocationInput = document.getElementById("userLocation");

getLocationBtn.addEventListener("click", () => {
  if (navigator.geolocation) {
    getLocationBtn.disabled = true;
    getLocationBtn.innerText = "Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹...";
    navigator.geolocation.getCurrentPosition(
      (position) => {
        const lat = position.coords.latitude;
        const lng = position.coords.longitude;
        const mapsLink = `https://www.google.com/maps?q=${lat},${lng}`;
        userLocationInput.value = mapsLink;
        showToast("ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹Ùƒ Ø¨Ù†Ø¬Ø§Ø­ âœ”ï¸");
        getLocationBtn.disabled = false;
        getLocationBtn.innerText = "ğŸ“ Ù…ÙˆÙ‚Ø¹ÙŠ";
      },
      (error) => {
        alert("Ù„Ù… Ù†ØªÙ…ÙƒÙ† Ù…Ù† ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹Ùƒ. ÙŠØ±Ø¬Ù‰ ØªÙØ¹ÙŠÙ„ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹.");
        getLocationBtn.disabled = false;
        getLocationBtn.innerText = "ğŸ“ Ù…ÙˆÙ‚Ø¹ÙŠ";
      }
    );
  } else {
    alert("Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ù…ÙŠØ²Ø© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹.");
  }
});
// Navbar
const navItems = document.querySelectorAll(".nav-item");
const pages = document.querySelectorAll(".page");
navItems.forEach(item => {
  item.addEventListener("click", () => {
    navItems.forEach(i => i.classList.remove("active"));
    pages.forEach(p => p.classList.remove("active"));
    item.classList.add("active");
    document.getElementById(item.dataset.target).classList.add("active");
  });
});

// Categories filter
const categories = document.querySelectorAll(".category");
const products = document.querySelectorAll(".product");
categories.forEach(cat => {
  cat.addEventListener("click", () => {
    categories.forEach(c => c.classList.remove("active"));
    cat.classList.add("active");
    const selected = cat.dataset.category;
    products.forEach(p => p.style.display = (selected==='all'||p.dataset.category===selected)?'block':'none');
  });
});

// Cart
const cartContainer = document.getElementById("cartContainer");
const subtotalPriceEl = document.getElementById("subtotalPrice");
const deliveryFeeEl = document.getElementById("deliveryFee");
const totalPriceEl = document.getElementById("totalPrice");
const deliveryBtns = document.querySelectorAll(".delivery-btn");
let selectedDeliveryFee = 5;
let cart = [];

function updateCart() {
  cartContainer.innerHTML = '';
  let subtotal = 0;

  products.forEach(product => {
    const title = product.querySelector(".title").innerText;
    const cartBtn = product.querySelector(".cart-btn");
    const inCart = cart.find(i => i.title === title);
    cartBtn.style.background = inCart ? "green" : "var(--color-primary)";
  });

  cart.forEach((item,index) => {
    const itemTotal = item.qty * item.price;
    subtotal += itemTotal;
    const cartItem = document.createElement('div');
    cartItem.className = 'cart-item';
    cartItem.innerHTML = `
      <button class="remove-btn">&times;</button>
      <img src="${item.img}" alt="${item.title}">
      <div class="cart-details">
        <span class="cart-title">${item.title}</span>
        <div class="cart-qty-price">
          <div class="quantity">
            <button class="qty-btn minus">-</button>
            <input type="number" value="${item.qty}" min="1">
            <button class="qty-btn plus">+</button>
          </div>
          <span class="cart-price">${itemTotal}$</span>
        </div>
      </div>
    `;
    const qtyInput = cartItem.querySelector("input");
    const minusBtn = cartItem.querySelector(".minus");
    const plusBtn = cartItem.querySelector(".plus");
    const removeBtn = cartItem.querySelector(".remove-btn");

    minusBtn.addEventListener("click", () => { if(item.qty>1){ item.qty--; updateCart(); } });
    plusBtn.addEventListener("click", () => { item.qty++; updateCart(); });
    qtyInput.addEventListener("change", () => { item.qty = parseInt(qtyInput.value)||1; updateCart(); });

    removeBtn.addEventListener("click", () => {
      if(confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø²Ø§Ù„Ø© "${item.title}" Ù…Ù† Ø§Ù„Ø³Ù„Ø©ØŸ`)){
        cart.splice(index, 1);
        updateCart();
      }
    });

    cartContainer.appendChild(cartItem);
  });

  subtotalPriceEl.innerText = subtotal + "$";
  deliveryFeeEl.innerText = selectedDeliveryFee + "$";
  totalPriceEl.innerText = (subtotal + selectedDeliveryFee) + "$";
}

// Delivery buttons
deliveryBtns.forEach(btn => {
  btn.addEventListener("click", () => {
    deliveryBtns.forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    selectedDeliveryFee = parseFloat(btn.dataset.fee);
    updateCart();
  });
});

// Product popup
const popupOverlay = document.getElementById("productPopupOverlay");
const popupImg = document.getElementById("popupImg");
const popupTitle = document.getElementById("popupTitle");
const popupDesc = document.getElementById("popupDesc");
const popupPrice = document.getElementById("popupPrice");
const popupClose = document.getElementById("popupClose");
const popupAddCart = document.getElementById("popupAddCart");

products.forEach(product => {
  const cartBtn = product.querySelector(".cart-btn");
  const price = parseFloat(product.querySelector(".price").innerText.replace("$",""));
  const title = product.querySelector(".title").innerText;
  const img = product.querySelector("img").src;

  product.addEventListener("click", e => {
    if(e.target.closest(".cart-btn")) return;
    popupImg.src = img;
    popupTitle.innerText = title;
    popupDesc.innerText = product.querySelector(".description").innerText;
    popupPrice.innerText = product.querySelector(".price").innerText;
    popupOverlay.classList.add("show");
  });

  cartBtn.addEventListener("click", e => {
    e.stopPropagation();
    const exists = cart.find(i=>i.title===title);
    if(exists){ exists.qty++; } else { cart.push({title,img,price,qty:1}); }
    updateCart();
showToast(title + " ØªÙ…Øª Ø¥Ø¶Ø§ÙØªÙ‡ Ù„Ù„Ø³Ù„Ø© âœ”ï¸");
  });
});

popupClose.addEventListener("click", () => popupOverlay.classList.remove("show"));
popupOverlay.addEventListener("click", e => { if(e.target===popupOverlay) popupOverlay.classList.remove("show"); });
popupAddCart.addEventListener("click", () => {
  const qty = parseInt(document.getElementById("popupQty").value) || 1;
  const exists = cart.find(i => i.title === popupTitle.innerText);
  if (exists) {
    exists.qty += qty;
  } else {
    cart.push({
      title: popupTitle.innerText,
      img: popupImg.src,
      price: parseFloat(popupPrice.innerText.replace("$","")),
      qty: qty
    });
  }
  updateCart();
  popupOverlay.classList.remove("show");
  showToast(popupTitle.innerText + " ØªÙ…Øª Ø¥Ø¶Ø§ÙØªÙ‡ Ù„Ù„Ø³Ù„Ø© âœ”ï¸");
});
// Search
const searchToggle = document.getElementById("searchToggle");
const searchInput = document.getElementById("searchInput");
const searchContainer = document.querySelector("header .search");

searchToggle.addEventListener("click", () => {
  searchContainer.classList.toggle("active");
  if (searchContainer.classList.contains("active")) {
    searchInput.focus();
    searchToggle.classList.replace("fa-search", "fa-times");
  } else {
    searchInput.value = "";
    products.forEach(p => p.style.display = "block");
    searchToggle.classList.replace("fa-times", "fa-search");
  }
});

searchInput.addEventListener("input", () => {
  const query = searchInput.value.toLowerCase();
  products.forEach(p => {
    const title = p.querySelector(".title").innerText.toLowerCase();
    p.style.display = title.includes(query) ? "block" : "none";
  });
});
  searchInput.addEventListener('input', () => {
  const query = searchInput.value.toLowerCase();
  products.forEach(p => {
    const title = p.querySelector('.title').innerText.toLowerCase();
    p.style.display = title.includes(query)?'block':'none';
  });
});

// Checkout
checkoutBtn.addEventListener("click", () => {
  const activeDelivery = document.querySelector(".delivery-btn.active");
  const deliveryType = activeDelivery.innerText.trim();

  const locationInput = document.getElementById("userLocation").value.trim();
  if (deliveryType.includes("ØªÙˆØµÙŠÙ„") && !locationInput) {
    alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙˆÙ‚Ø¹ Ù…Ù†Ø²Ù„ÙƒÙ… Ù‚Ø¨Ù„ Ø§Ù„Ø¯ÙØ¹.");
    return;
  }

  if (cart.length === 0) {
    alert("Ø³Ù„ØªÙƒ ÙØ§Ø±ØºØ©!");
    return;
  }

  const phone = document.getElementById("userPhone").value.trim() || "Ù„Ù… ÙŠØªÙ… Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù…";
  const now = new Date();

  let receipt = `ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø·Ù„Ø¨:\n`;
  receipt += `â€¢ Ø§Ù„ÙˆÙ‚Øª: ${now.toLocaleString()}\n`;
  receipt += `â€¢ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ: ${phone}\n`;
  receipt += `â€¢ Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${locationInput || 'Ù„Ù… ÙŠØªÙ… Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙˆÙ‚Ø¹'}\n`;
  receipt += `â€¢ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙˆØµÙŠÙ„: ${deliveryType}\n\n`;

  receipt += `Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:\n`;
  let subtotal = 0;
  cart.forEach(item => {
    const itemTotal = item.qty * item.price;
    subtotal += itemTotal;
    receipt += `â€¢ ${item.title} - ${item.price}$ - ${item.qty} - ${itemTotal}$\n`;
  });

  receipt += `\n-Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ: ${subtotal}$\n`;
  receipt += `-Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„: ${selectedDeliveryFee}$\n`;
  receipt += `-Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${subtotal + selectedDeliveryFee}$`;

  const encodedReceipt = encodeURIComponent(receipt);
  window.open(`https://wa.me/9647881552046?text=${encodedReceipt}`, "_blank");
});
// Update cart function
function updateCart() {
  cartContainer.innerHTML = '';
  let subtotal = 0;

  products.forEach(product => {
    const title = product.querySelector(".title").innerText;
    const cartBtn = product.querySelector(".cart-btn");
    const inCart = cart.find(i => i.title === title);
    cartBtn.style.background = inCart ? "green" : "var(--color-primary)";
  });

  cart.forEach((item, index) => {
    const itemTotal = item.qty * item.price;
    subtotal += itemTotal;

    const cartItem = document.createElement('div');
    cartItem.className = 'cart-item';
    cartItem.innerHTML = `
      <button class="remove-btn">&times;</button>
      <img src="${item.img}" alt="${item.title}">
      <div class="cart-details">
        <span class="cart-title">${item.title}</span>
        <div class="cart-qty-price">
          <div class="quantity">
            <button class="qty-btn minus">-</button>
            <input type="number" value="${item.qty}" min="1">
            <button class="qty-btn plus">+</button>
          </div>
          <span class="cart-price">${itemTotal}$</span>
        </div>
      </div>
    `;

    const qtyInput = cartItem.querySelector("input");
    const minusBtn = cartItem.querySelector(".minus");
    const plusBtn = cartItem.querySelector(".plus");
    const removeBtn = cartItem.querySelector(".remove-btn");

    minusBtn.addEventListener("click", () => { if(item.qty>1){ item.qty--; updateCart(); } });
    plusBtn.addEventListener("click", () => { item.qty++; updateCart(); });
    qtyInput.addEventListener("change", () => { item.qty = parseInt(qtyInput.value)||1; updateCart(); });

    removeBtn.addEventListener("click", () => {
      if(confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø²Ø§Ù„Ø© "${item.title}" Ù…Ù† Ø§Ù„Ø³Ù„Ø©ØŸ`)){
        cart.splice(index, 1);
        updateCart();
      }
    });

    cartContainer.appendChild(cartItem);
  });

  // Update subtotal and totals
  subtotalPriceEl.innerText = subtotal + "$";
  deliveryFeeEl.innerText = selectedDeliveryFee + "$";
  totalPriceEl.innerText = (subtotal + selectedDeliveryFee) + "$";

  // Update cart badge
  const cartBadge = document.getElementById("cartBadge");
  const totalItems = cart.reduce((sum, item) => sum + item.qty, 0);
  cartBadge.innerText = totalItems;
  cartBadge.style.display = totalItems > 0 ? "inline-block" : "none";
}

// Call once initially
updateCart();</script>
  <div id="toast" style="
  visibility:hidden; min-width:200px; background:#333; color:#fff;
  text-align:center; border-radius:8px; padding:12px; position:fixed;
  bottom:80px; right:50%; transform:translateX(50%);
  z-index:5000; font-size:14px; opacity:0; transition:opacity 0.5s;">
</div>
<script>
function showToast(msg) {
  const toast = document.getElementById("toast");
  toast.innerText = msg;
  toast.style.visibility = "visible";
  toast.style.opacity = "1";
  setTimeout(() => {
    toast.style.opacity = "0";
    setTimeout(() => toast.style.visibility = "hidden", 500);
  }, 2000);
}
</script>
</body>
</html>










